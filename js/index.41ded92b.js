(function(t){function e(e){for(var o,a,s=e[0],c=e[1],l=e[2],f=0,d=[];f<s.length;f++)a=s[f],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&d.push(i[a][0]),i[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(o=!1)}o&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},i={index:0},r=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("c31f")},"19a5":function(t,e,n){"use strict";n("28d7")},"20b4":function(t,e,n){},"28d7":function(t,e,n){},"5b62":function(t,e,n){t.exports=n.p+"img/logo.82b9c7a5.png"},c31f:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("button",{on:{click:t.show1}},[t._v("组件形式打开")]),n("button",{on:{click:t.show2}},[t._v("调用方法打开")]),n("VDPhoto",{ref:"VDPhoto",attrs:{imgData:t.imgData,imgName:t.imgName},on:{publish:t.publish,close:t.close}})],1)},r=[],a={data:function(){return{imgData:n("ceec"),imgName:"图片名",width:"10px"}},methods:{show1:function(){this.$refs.VDPhoto.show()},show2:function(){this.$VDPhoto.show({imgData:n("5b62"),imgName:"图片名",title:""})},publish:function(t){console.log(t,"--val--")},close:function(){console.log("close")}}},s=a,c=n("2877"),l=Object(c["a"])(s,i,r,!1,null,null,null),u=l.exports,f=n("53ca"),d=(n("b0c0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-dialog",t._g(t._b({attrs:{visible:t.showBox},on:{close:t.destroy}},"el-dialog",t.$attrs,!1),t.$listeners),[n("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.title))]),n("section",{staticClass:"header-photo",attrs:{slot:"footer"},slot:"footer"},[n("div",{staticClass:"head-content"},[n("div",{staticClass:"tools-wrap"},[n("div",{staticClass:"photo-tools"},[n("el-tooltip",{attrs:{effect:"dark",content:"缩小"}},[n("span",{staticClass:"el-icon-zoom-out",on:{click:t.narrow}})]),n("el-tooltip",{attrs:{effect:"dark",content:"实际大小"}},[n("span",{staticClass:"el-icon-view",on:{click:t.reduction}})]),n("el-tooltip",{attrs:{effect:"dark",content:"放大"}},[n("span",{staticClass:"el-icon-zoom-in",on:{click:t.enlarge}})]),n("el-tooltip",{attrs:{effect:"dark",content:"旋转"}},[n("span",{staticClass:"el-icon-refresh",on:{click:t.rotate}})]),n("el-tooltip",{attrs:{effect:"dark",content:"下载"}},[n("span",{staticClass:"el-icon-download",on:{click:function(e){return t.downloadFile(t.imgData)}}})]),n("el-tooltip",{attrs:{effect:"dark",content:"打印"}},[n("span",{staticClass:"el-icon-printer",on:{click:t.publish}})])],1)])])]),n("section",{staticClass:"content"},[t.isImg?n("img",{ref:"imgBox",staticClass:"img",style:{transform:"translateX("+t.activeImg.x+"px) translateY("+t.activeImg.y+"px) scale("+t.activeImg.scale+") rotate("+t.activeImg.rotate+"deg)"},attrs:{alt:"",src:t.imgData},on:{mousedown:t.down}}):n("iframe",{ref:"imgBox",staticClass:"iframe",style:{transform:"translateX("+t.activeImg.x+"px) translateY("+t.activeImg.y+"px) scale("+t.activeImg.scale+") rotate("+t.activeImg.rotate+"deg)"},attrs:{src:t.wordUrl,title:""},on:{mousedown:t.down}}),t._t("default")],2)])],1)}),p=[],m=(n("a7cc"),n("450d"),n("df33")),h=n.n(m),g=(n("0c67"),n("299c")),v=n.n(g),w=(n("d3b7"),n("21a6"));function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dowmload";return y(t).then((function(t){Object(w["saveAs"])(t,e)})),!1}function y(t){return new Promise((function(e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onload=function(){200===n.status&&e(n.response)},n.send()}))}var x=function t(e,n){if(!(this instanceof t))return new t(e,n);this.options=this.extend({noPrint:".no-print"},n),"string"===typeof e?this.dom=document.querySelector(e):(this.isDOM(e),this.dom=this.isDOM(e)?e:e.$el),this.init()};x.prototype={init:function(){var t=this.getStyle()+this.getHtml();this.writeIframe(t)},extend:function(t,e){for(var n in e)t[n]=e[n];return t},getStyle:function(){for(var t="",e=document.querySelectorAll("style,link"),n=0;n<e.length;n++)t+=e[n].outerHTML;return t+="<style>body{ text-align: center }</style>",t+="<style>"+(this.options.noPrint?this.options.noPrint:".no-print")+"{display:none;}</style>",t},getHtml:function(){for(var t=document.querySelectorAll("input"),e=document.querySelectorAll("textarea"),n=document.querySelectorAll("select"),o=0;o<t.length;o++)"checkbox"==t[o].type||"radio"==t[o].type?1==t[o].checked?t[o].setAttribute("checked","checked"):t[o].removeAttribute("checked"):(t[o].type,t[o].setAttribute("value",t[o].value));for(var i=0;i<e.length;i++)"textarea"==e[i].type&&(e[i].innerHTML=e[i].value);for(var r=0;r<n.length;r++)if("select-one"==n[r].type){var a=n[r].children;for(var s in a)"OPTION"==a[s].tagName&&(1==a[s].selected?a[s].setAttribute("selected","selected"):a[s].removeAttribute("selected"))}return this.dom.outerHTML},writeIframe:function(t){var e,n,o=document.createElement("iframe"),i=document.body.appendChild(o);o.id="myIframe",o.setAttribute("style","position:absolute;width:0;height:0;top:-10px;left:-10px;"),i.contentWindow.document.body.style="text-align: center",e=i.contentWindow||i.contentDocument,n=i.contentDocument||i.contentWindow.document,n.open(),n.write(t),n.close();var r=this;o.onload=function(){r.toPrint(e),setTimeout((function(){document.body.removeChild(o)}),100)}},toPrint:function(t){try{setTimeout((function(){t.focus();try{t.document.execCommand("print",!1,null)||t.print()}catch(e){t.print()}t.close()}),10)}catch(e){console.log("err",e)}},isDOM:"object"===("undefined"===typeof HTMLElement?"undefined":Object(f["a"])(HTMLElement))?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"===Object(f["a"])(t)&&1===t.nodeType&&"string"===typeof t.nodeName}};var I=x,O={png:1,jpg:2,jpge:3,bmp:4,gif:5},k={mdb:1,xls:2,doc:3,docx:4,pdf:5},D={name:"VDPhoto",components:{"el-tooltip":v.a,"el-dialog":h.a},props:{imgData:{type:String,default:""},imgName:{type:String,default:""},title:{type:String,default:""}},data:function(){return{showBox:!1,activeImg:{scale:1,x:0,y:0,rotate:0},wordUrl:""}},methods:{show:function(){this.showBox=!0},destroy:function(){this.showBox=!1},down:function(t){var e=this,n=t.pageX,o=t.pageY,i=this.activeImg.x,r=this.activeImg.y;return window.onmousemove=function(t){var a=t.pageX,s=t.pageY,c=parseInt(a-n),l=parseInt(s-o);return e.activeImg.x=c+i,e.activeImg.y=l+r,!1},window.onmouseup=function(){window.onmousemove=window.onmouseup=null},!1},enlarge:function(){var t=this.activeImg.scale;t+=.1,t>=5&&(t=5),this.activeImg.scale=t},narrow:function(){var t=this.activeImg.scale;t-=.1,t<=.1&&(t=.1),this.activeImg.scale=t},reduction:function(){this.activeImg.scale=1,this.activeImg.x=0,this.activeImg.y=0,this.activeImg.rotate=0},rotate:function(){var t=this.activeImg.rotate;t+=90,this.activeImg.rotate=t},downloadFile:function(t){var e;if(this.imgName)e=this.imgName;else{var n=t.lastIndexOf("/"),o=t.lastIndexOf("."),i=t.substring(n+1,o);e=i}b(t,e)},publish:function(){this.isImg?I(this.$refs.imgBox):console.log("请下载后打印"),this.$emit("publish",this.$refs.imgBox)}},computed:{suffixName:function(){return this.imgData.substring(this.idx+1,this.imgData.length).toLowerCase()},idx:function(){return this.imgData.lastIndexOf(".")},isImg:function(){return O[this.suffixName]}},watch:{wordUrl:function(){5===k[this.suffixName]?this.wordUrl=this.imgData:this.wordUrl="https://view.officeapps.live.com/op/view.aspx?src=".concat(this.imgData)}}},j=D,P=(n("caf7"),n("19a5"),Object(c["a"])(j,d,p,!1,null,"2f192730",null)),C=P.exports,_=function(t,e){var n,o=t.extend(C),i=function(){n=new o;var t=n.$mount().$el;document.body.appendChild(t)};t.prototype.$VDPhoto={show:function(t){return i(),"object"===Object(f["a"])(t)&&Object.assign(n,t),n.show()}},t.component(C.name,C)};"undefined"!==typeof window&&window.Vue&&_(window.Vue);var S={install:_,component:C};n("0fae");o["default"].config.productionTip=!1,o["default"].use(S),new o["default"]({render:function(t){return t(u)}}).$mount("#app")},caf7:function(t,e,n){"use strict";n("20b4")},ceec:function(t,e,n){t.exports=n.p+"img/demo1.03e26b03.gif"}});